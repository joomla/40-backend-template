(t=>{const e={ENTER:13,SPACE:32},s=document.createElement("template"),i=document.currentScript.src;s.innerHTML=`<link href="${i.replace("/js/","/css/").replace(".js",".css")}" rel="stylesheet" type="text/css"></link>\n<slot></slot>`,window.ShadyCSS&&ShadyCSS.prepareTemplate(s,"joomla-field-switcher");t.define("joomla-field-switcher",class extends HTMLElement{static get observedAttributes(){return["type","off-text","on-text"]}get type(){return this.getAttribute("type")}set type(t){return this.setAttribute("type",t)}get offText(){return this.getAttribute("off-text")||"Off"}get onText(){return this.getAttribute("on-text")||"On"}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(s.content.cloneNode(!0)),window.ShadyCSS&&ShadyCSS.styleElement(this),this.inputs=[],this.spans=[],this.initialized=!1,this.inputsContainer="",this.newActive="",this.hiddenInput="",this.inputLabel="",this.inputLabelText="",this.createMarkup=this.createMarkup.bind(this),this.addListeners=this.addListeners.bind(this),this.removeListeners=this.removeListeners.bind(this),this.switch=this.switch.bind(this),this.toggle=this.toggle.bind(this),this.keyEvents=this.keyEvents.bind(this),this.onFocus=this.onFocus.bind(this)}connectedCallback(){if(this.initialized&&this.inputs.length>0)this.addListeners();else{if(this.inputs=[].slice.call(this.querySelectorAll("input")),2!==this.inputs.length||"radio"!==this.inputs[0].type)throw new Error('`Joomla-switcher` requires two inputs type="radio"');this.inputLabel=document.querySelector(`[for="${this.id}"]`),this.inputLabel&&(this.inputLabelText=this.inputLabel.innerText),this.createMarkup(),this.inputsContainer=this.inputs[0].parentNode,this.inputsContainer.setAttribute("role","switch"),this.inputs[1].checked?(this.inputs[1].parentNode.classList.add("active"),this.spans[1].classList.add("active"),this.inputsContainer.setAttribute("aria-label",this.spans[1].innerHTML)):(this.spans[0].classList.add("active"),this.inputsContainer.setAttribute("aria-label",this.spans[0].innerHTML)),this.addListeners(),this.hiddenInput=document.createElement("input"),this.hiddenInput.setAttribute("type","hidden"),this.hiddenInput.setAttribute("value",this.inputs[1].classList.contains("active")?"1":"0"),this.hiddenInput.setAttribute("name",this.inputs[0].getAttribute("name")),this.appendChild(this.hiddenInput)}}disconnectedCallback(){this.removeListeners()}dispatchCustomEvent(t){const e=new CustomEvent(t,{bubbles:!0,cancelable:!0});e.relatedTarget=this,this.dispatchEvent(e),this.removeEventListener(t,this)}createMarkup(){let t=0;this.type||this.setAttribute("type","success");const e=document.createElement("span");e.classList.add("switcher"),e.classList.add(this.type),e.setAttribute("tabindex","0");const s=document.createElement("span");s.classList.add("switch"),s.classList.add(this.type),this.inputs.forEach((s,i)=>{s.setAttribute("tabindex","-1"),s.checked&&e.setAttribute("aria-checked",!0),e.appendChild(s),1===i&&s.checked&&(t=1)}),e.appendChild(s);const i=document.createElement("span");i.classList.add("switcher-labels");const n=document.createElement("span");n.classList.add("switcher-label-0"),n.innerHTML=`${this.offText}`;const a=document.createElement("span");a.classList.add("switcher-label-1"),a.innerHTML=`${this.onText}`,0===t?n.classList.add("active"):a.classList.add("active"),this.spans.push(n),this.spans.push(a),i.appendChild(n),i.appendChild(a),this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(i),this.initialized=!0}switch(){this.spans.forEach(t=>{t.classList.remove("active")}),this.inputsContainer.classList.contains("active")?this.inputsContainer.classList.remove("active"):this.inputsContainer.classList.add("active"),this.inputs.forEach(t=>{t.classList.remove("active")}),1===this.newActive?(this.inputs[this.newActive].classList.add("active"),this.inputs[1].setAttribute("checked",""),this.inputs[0].removeAttribute("checked"),this.inputsContainer.setAttribute("aria-checked",!0),this.inputsContainer.setAttribute("aria-label",`${this.inputLabelText} ${this.spans[1].innerHTML}`),this.dispatchCustomEvent("joomla.switcher.on")):(this.inputs[1].removeAttribute("checked"),this.inputs[0].setAttribute("checked",""),this.inputs[0].classList.add("active"),this.inputsContainer.setAttribute("aria-checked",!1),this.inputsContainer.setAttribute("aria-label",`${this.inputLabelText} ${this.spans[0].innerHTML}`),this.dispatchCustomEvent("joomla.switcher.off")),this.spans[this.newActive].classList.add("active")}toggle(){this.newActive=this.inputs[1].classList.contains("active")?0:1,this.hiddenInput.setAttribute("value",this.inputs[1].classList.contains("active")?"0":"1"),this.switch()}keyEvents(t){t.keyCode!==e.ENTER&&t.keyCode!==e.SPACE||(t.preventDefault(),this.newActive=this.inputs[1].classList.contains("active")?0:1,this.switch())}onFocus(){this.inputsContainer.focus()}addListeners(){this.inputLabel&&this.inputLabel.addEventListener("click",this.onFocus),this.inputs.forEach(t=>{t.addEventListener("click",this.toggle)}),this.inputsContainer.addEventListener("keydown",this.keyEvents)}removeListeners(){this.inputLabel&&this.inputLabel.removeEventListener("click",this.onFocus),this.inputs.forEach(t=>{t.removeEventListener("click",this.toggle)}),this.inputsContainer.removeEventListener("keydown",this.keyEvents)}})})(customElements);